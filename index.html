<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>TikTok Power-Up Tool (Node.js)</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css"/>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Be+Vietnam+Pro:wght@400;500;700&display=swap" rel="stylesheet">
  <style>
    body {
      font-family: 'Be Vietnam Pro', sans-serif;
      background: linear-gradient(135deg, #1a1a2e, #16213e, #0f3460);
      min-height: 100vh;
      display: flex;
      align-items: center;
      justify-content: center;
    }
    .card {
      background-color: rgba(255, 255, 255, 0.05);
      border: 1px solid rgba(255, 255, 255, 0.1);
      backdrop-filter: blur(10px);
      border-radius: 15px;
      box-shadow: 0 8px 32px 0 rgba(0, 0, 0, 0.37);
    }
    .form-control, .form-select {
      background-color: rgba(0, 0, 0, 0.3);
      border: 1px solid rgba(255, 255, 255, 0.2);
      color: #fff;
    }
    .form-control:focus, .form-select:focus {
      background-color: rgba(0, 0, 0, 0.4);
      border-color: #e94560;
      box-shadow: 0 0 0 0.25rem rgba(233, 69, 96, 0.25);
      color: #fff;
    }
    .form-control::placeholder { color: #a0a0a0; }
    .btn-submit {
      background: #e94560;
      border: none;
      font-weight: 700;
      transition: all 0.3s ease;
      padding: 12px;
    }
    .btn-submit:hover {
      background: #f0627a;
      transform: translateY(-2px);
      box-shadow: 0 4px 15px rgba(233, 69, 96, 0.4);
    }
    #result pre {
        white-space: pre-wrap;
        word-wrap: break-word;
        background-color: rgba(0, 0, 0, 0.2);
        border-left: 3px solid #e94560;
        padding: 15px;
        border-radius: 8px;
        font-size: 0.9em;
    }
    .fa-check-circle { color: #3498db; margin-left: 8px; }
  </style>
</head>
<body>
  <div class="container col-lg-5 col-md-7 col-sm-10 py-5">
    <div class="card text-light">
      <div class="card-body p-4 p-md-5 text-center">
        <h2 class="mb-4 fw-bold">
          <i class="fab fa-node-js"></i> TikTok Power-Up 
          <i class="fas fa-check-circle" title="Verified Professional Tool"></i>
        </h2>
        <form id="buffForm" action="/buff" method="POST" class="p-3">
          <div class="mb-3 text-start">
            <label class="form-label"><i class="fab fa-tiktok"></i> Link Video TikTok</label>
            <input type="url" class="form-control" name="link" placeholder="https://www.tiktok.com/@user/video/..." required>
          </div>
          <div class="mb-3 text-start">
            <label class="form-label"><i class="fas fa-tasks"></i> Ch·ªçn Lo·∫°i D·ªãch V·ª•</label>
            <select class="form-select" name="type" required>
              <option value="121">‚ù§Ô∏è TƒÉng Tim (Likes)</option>
              <option value="79">üëÄ TƒÉng L∆∞·ª£t xem (Views)</option>
            </select>
          </div>
          <div class="mb-4 text-start">
            <label class="form-label"><i class="fas fa-sort-numeric-up"></i> S·ªë l∆∞·ª£ng</label>
            <input type="number" class="form-control" name="amount" min="10" max="5000" value="100" required>
          </div>
          <button type="submit" id="submitButton" class="btn btn-submit w-100 rounded-pill">
            <span id="buttonText">üöÄ B·∫Øt ƒê·∫ßu Buff</span>
            <div id="spinner" class="spinner-border spinner-border-sm d-none" role="status">
              <span class="visually-hidden">Loading...</span>
            </div>
          </button>
        </form>
        <div id="result" class="mt-4 text-start"></div>
      </div>
    </div>
    <footer class="text-center mt-4 text-white-50">
      <small>Pro Tool (Node.js) - N√¢ng c·∫•p b·ªüi B·∫°n üòé</small>
    </footer>
  </div>

<script>
document.getElementById('buffForm').addEventListener('submit', function(event) {
    event.preventDefault();

    const form = this;
    const submitButton = document.getElementById('submitButton');
    const buttonText = document.getElementById('buttonText');
    const spinner = document.getElementById('spinner');
    const resultDiv = document.getElementById('result');

    submitButton.disabled = true;
    buttonText.textContent = 'ƒêang x·ª≠ l√Ω...';
    spinner.classList.remove('d-none');
    resultDiv.innerHTML = `<div class="alert alert-info"><div class="d-flex align-items-center"><div class="spinner-border spinner-border-sm me-2" role="status"></div><strong>ƒêang t·∫£i proxy v√† g·ª≠i y√™u c·∫ßu...</strong></div></div>`;

    const formData = new FormData(form);
    const data = Object.fromEntries(formData.entries());

    fetch('/buff', { // Ch√∫ √Ω: action l√† /buff
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify(data)
    })
    .then(response => response.json())
    .then(data => {
        let alertClass = data.status === 'success' ? 'alert-success' : 'alert-danger';
        let messageHtml = data.message.replace(/\n/g, '<br>')
                                     .replace(/‚úÖ/g, '<i class="fas fa-check-circle text-success"></i>')
                                     .replace(/‚ùå/g, '<i class="fas fa-times-circle text-danger"></i>')
                                     .replace(/\*\*(.*?)\*\*/g, '<strong>$1</strong>')
                                     .replace(/`(.*?)`/g, '<code>$1</code>')
                                     .replace(/--- PH·∫¢N H·ªíI T·ª™ API ---<br>```<br>/, '<hr><strong>PH·∫¢N H·ªíI T·ª™ API:</strong><pre class="mt-2">')
                                     .replace(/<br>```/, '</pre>');
        resultDiv.innerHTML = `<div class="alert ${alertClass}">${messageHtml}</div>`;
    })
    .catch(error => {
        resultDiv.innerHTML = `<div class="alert alert-danger"><strong>L·ªói k·∫øt n·ªëi!</strong><br>Kh√¥ng th·ªÉ g·ª≠i y√™u c·∫ßu. Vui l√≤ng ki·ªÉm tra l·∫°i m·∫°ng v√† th·ª≠ l·∫°i.</div>`;
    })
    .finally(() => {
        submitButton.disabled = false;
        buttonText.textContent = 'üöÄ B·∫Øt ƒê·∫ßu Buff';
        spinner.classList.add('d-none');
    });
});
</script>

</body>
</html>
